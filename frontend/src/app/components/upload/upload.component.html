<div class="container">
  <h2>üì§ Subir Nuevo Curso SCORM</h2>

  <div class="form-group mb-3">
    <label class="form-label">T√≠tulo del Curso:</label>
    <input type="text" class="form-control" [(ngModel)]="titulo" placeholder="Ej: Prevenci√≥n de Riesgos">
  </div>

  <div class="form-group mb-3">
    <label class="form-label">Categor√≠a:</label>
    <div class="d-flex gap-2">
      <select class="form-select" [(ngModel)]="categoriaIdSeleccionada">
        <option value="">-- Sin categor√≠a --</option>
        <option *ngFor="let c of categorias" [value]="c.id">{{ c.nombre }}</option>
      </select>
      <button class="btn btn-outline-secondary" (click)="toggleNuevaCategoria()" title="Nueva Categor√≠a">
        ‚ûï
      </button>
    </div>

    <!-- Formulario inline para nueva categor√≠a -->
    <div *ngIf="mostrarNuevaCategoria" class="mt-2 p-2 border rounded bg-light">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Nombre nueva categor√≠a" [(ngModel)]="nuevaCategoriaNombre">
        <button class="btn btn-success" (click)="guardarCategoria()">Guardar</button>
        <button class="btn btn-outline-danger" (click)="toggleNuevaCategoria()">X</button>
      </div>
    </div>
  </div>

  <div class="form-group mb-3">
    <label class="form-label">Descripci√≥n:</label>
    <textarea class="form-control" [(ngModel)]="descripcion" placeholder="Breve resumen..." rows="3"></textarea>
  </div>

  <div class="form-group mb-4">
    <label class="form-label">Archivo ZIP (SCORM):</label>
    <input type="file" class="form-control" (change)="onFileSelected($event)" accept=".zip">
    <div class="form-text">Debe ser un archivo .zip v√°lido que contenga un paquete SCORM 1.2 o 2004.</div>
  </div>

  <div class="d-flex justify-content-end gap-2">
    <button class="btn btn-secondary" (click)="cancelar()">Cancelar</button>
    <button class="btn btn-primary" (click)="subir()" [disabled]="!titulo || !archivoSeleccionado">
      <i class="bi bi-cloud-upload"></i> Subir Curso
    </button>
  </div>

  <p *ngIf="mensaje" [class.error]="esError" class="status-msg">{{ mensaje }}</p>
</div>